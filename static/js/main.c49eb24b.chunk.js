(this.webpackJsonpsssnake=this.webpackJsonpsssnake||[]).push([[0],{21:function(e,n,t){e.exports=t(31)},26:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(11),o=t.n(i),c=(t(26),t(9)),s=t(19),u=t(1),f=t(2);function h(){var e=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  grid-area: "," / "," / "," / ",";\n"]);return h=function(){return e},e}var d=f.a.div(h(),(function(e){return e.color}),(function(e){return e.y}),(function(e){return e.x}),(function(e){return e.y+1}),(function(e){return e.x+1})),l=function(e){var n=e.x,t=e.y,r=e.color,i=void 0===r?"black":r;return(a.a.createElement(d,{x:n,y:t,color:i}))},y=function(e){var n=e.x,t=e.y;return(a.a.createElement(l,{x:n,y:t,color:"green"}))},k=function(e){var n=e.body;return(a.a.createElement(a.a.Fragment,null,n.map((function(e){return a.a.createElement(l,{key:"".concat(e.x,"_").concat(e.y),x:e.x,y:e.y})}))))},v=t(16),p=t(17),x=t(18),m=function(e){return Math.floor(Math.random()*Math.floor(e))};function g(e,n){var t=Math.ceil(e),r=Math.floor(n);return m(r-t+1)+e}var b=function(){function e(){Object(p.a)(this,e),this.isPlaying=void 0,this._direction=void 0,this.snake=void 0,this.freeSpace=void 0,this.food=void 0,this._direction=-1,this.snake=[],this.isPlaying=!0;this.freeSpace=new Array(2500);for(var n=0;n<2500;n+=1)this.freeSpace[n]={x:n%50+1,y:1+~~(n/50)}}return Object(x.a)(e,[{key:"initDirection",value:function(){if(-1!==this.direction)throw new Error("Direction can only be initialized once");this.direction=g(0,3)}},{key:"getRandomCoordinates",value:function(e){return{x:g(e+1,50-e),y:g(e+1,50-e)}}},{key:"spawnSnake",value:function(){var e=this;if(Array.isArray(this.snake)&&0!==this.snake.length)throw new Error("Snake is already spawn!");if(-1===this.direction)throw new Error("You should specify direction first");var n=this.getRandomCoordinates(6);this.snake.push(n);var t=this.freeSpace.findIndex((function(e){return e.x===n.x&&e.y===n.y}));switch(this.freeSpace.splice(t,1),this.direction){case 0:for(var r=function(r){var a={x:n.x,y:n.y+r};e.snake.push(a),t=e.freeSpace.findIndex((function(e){return e.x===a.x&&e.y===a.y})),e.freeSpace.splice(t,1)},a=1;a<4;a+=1)r(a);break;case 1:for(var i=function(r){var a={x:n.x-r,y:n.y};e.snake.push(a),t=e.freeSpace.findIndex((function(e){return e.x===a.x&&e.y===a.y})),e.freeSpace.splice(t,1)},o=1;o<4;o+=1)i(o);break;case 2:for(var c=function(r){var a={x:n.x,y:n.y-r};e.snake.push(a),t=e.freeSpace.findIndex((function(e){return e.x===a.x&&e.y===a.y})),e.freeSpace.splice(t,1)},s=1;s<4;s+=1)c(s);break;case 3:for(var u=function(r){var a={x:n.x+r,y:n.y};e.snake.push(a),t=e.freeSpace.findIndex((function(e){return e.x===a.x&&e.y===a.y})),e.freeSpace.splice(t,1)},f=1;f<4;f+=1)u(f);break;default:console.error("I wish if JS had enums \ud83d\ude2d")}}},{key:"spawnFood",value:function(){if(Array.isArray(this.freeSpace)&&0===this.freeSpace.length)throw new Error("Can't spawn food. No free space left.");this.food=this.freeSpace[m(this.freeSpace.length)]}},{key:"checkGameOver",value:function(){var e=Object(v.a)(this.snake),n=e[0];e.slice(1).find((function(e){return e.x===n.x&&e.y===n.y}))&&(this.isPlaying=!1)}},{key:"moveHead",value:function(){var e,n;switch(this.direction){case 0:e={x:this.snake[0].x,y:this.snake[0].y-1||50};break;case 1:n=this.snake[0].x+1,e={x:n>50?1:n,y:this.snake[0].y};break;case 2:n=this.snake[0].y+1,e={x:this.snake[0].x,y:n>50?1:n};break;case 3:e={x:this.snake[0].x-1||50,y:this.snake[0].y};break;default:console.error("This is 2D snake paw \ud83d\udc0d")}this.snake.unshift(e);var t=this.freeSpace.findIndex((function(n){return n.x===e.x&&n.y===e.y}));this.freeSpace.splice(t,1)}},{key:"moveTail",value:function(){this.freeSpace.push(this.snake[this.snake.length-1]),this.snake.pop()}},{key:"moveSnake",value:function(){this.moveHead(),this.checkGameOver(),this.isEating?this.spawnFood():this.moveTail()}},{key:"direction",set:function(e){-1!==e&&-1!==this._direction&&(0!==this._direction&&2!==this._direction||1!==e&&3!==e)&&(1!==this._direction&&3!==this._direction||2!==e&&0!==e)||(this._direction=e)},get:function(){return this._direction}},{key:"isEating",get:function(){return this.snake[0].x===this.food.x&&this.snake[0].y===this.food.y}}],[{key:"instance",get:function(){return this.gameInstance||(this.gameInstance=new e),this.gameInstance}}]),e}();function w(){var e=Object(u.a)(["\n  display: grid;\n  grid: repeat(",", 1fr) / repeat(",", 1fr);\n  width: 100%;\n  height: 100%;\n  border: 1px solid;\n"]);return w=function(){return e},e}b.gameInstance=void 0;var S=f.a.div(w(),50,50),E=function(e){var n=e.snake,t=e.food;return(a.a.createElement(S,null,a.a.createElement(y,{x:t.x,y:t.y}),a.a.createElement(k,{body:n})))},O=function(e){var n=e.points;return(a.a.createElement(a.a.Fragment,null,n))};function j(){var e=Object(u.a)(["\n  grid-area: counter;\n"]);return j=function(){return e},e}function I(){var e=Object(u.a)(["\n  grid-area: game;\n  place-self: stretch;\n"]);return I=function(){return e},e}function _(){var e=Object(u.a)(["\n  display: grid;\n  grid:\n    [header-start] 'left-sidebar header right-sidebar' 25px [header-end]\n    [main-start] 'left-sidebar game right-sidebar' 600px [main-end]\n    [footer-start] 'left-sidebar counter right-sidebar' 50px [footer-end]\n    / 1fr 600px 1fr;\n  place-items: center;\n"]);return _=function(){return e},e}var A=f.a.div(_()),F=f.a.div(I()),D=f.a.div(j()),M=function(e){var n=e.snake,t=e.food;return(a.a.createElement(A,null,a.a.createElement(F,null,a.a.createElement(E,{snake:n,food:t})),a.a.createElement(D,null,a.a.createElement(O,{points:10*(n.length-4)}))))},P=b.instance;P.initDirection(),P.spawnSnake(),P.spawnFood();var C=function(e,n){P.isPlaying&&(P.moveSnake(),e(Object(s.a)(P.snake)),n(P.food))},J=function(e){switch(e.key){case"ArrowLeft":P.direction=3;break;case"ArrowRight":P.direction=1;break;case"ArrowUp":P.direction=0;break;case"ArrowDown":P.direction=2;break;default:console.info(e.key)}},L=function(){var e=Object(r.useState)(P.snake),n=Object(c.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(P.food),s=Object(c.a)(o,2),u=s[0],f=s[1];return Object(r.useEffect)((function(){document.addEventListener("keydown",J);var e=setInterval(C,100,i,f);return function(){document.removeEventListener("keydown",J),clearInterval(e)}}),[]),a.a.createElement(M,{snake:t,food:u})};var R=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.c49eb24b.chunk.js.map